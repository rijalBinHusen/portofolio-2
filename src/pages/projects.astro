---
import Layout from "../layouts/default.astro";
import Projects from "./projects.vue";
const title = 'Rijal bin husen github repositories';
const description = 'List of repositories from rijal bin husen github';
const permalink = Astro.site.href;
---
<Layout title={title} description={description} permalink={permalink}>
    <Projects client:load />
</Layout>

<!-- <script lang="ts">
    
let repos = []

const getRepository = async () => {
    fetch('https://api.github.com/users/rijalBinHusen/repos')
	.then(response => response.json())
	.then(data => {
        renewLists(data)
        window.localStorage.setItem('repository', JSON.stringify({
            repos: data,
            expired: new Date().getTime() + 86400000
        })
        )
        console.log(data)
    })
	.catch(err => console.error(err));
}

const renewLists = (newRepos: Main[]) => {
    repos = newRepos.sort(function (a, b) {
          // return a?.pushed_at - b?.pushed_at;
          let x = a.pushed_at;
          let y = b.pushed_at;
          if (x < y) {
            return 1;
          }
          if (x > y) {
            return -1;
          }
          return 0;
        });
}

onMounted(() => {
    if(!repos?.length) {
        // get local storage firstt
        let getLocalRepos = JSON.parse(window.localStorage.getItem('repository'))
        // if local storage expired
        if(!getLocalRepos?.repos || new Date().getTime() > getLocalRepos.expired ) {
            // we do anything for you
            getRepository()
            return
        }
        renewLists(getLocalRepos.repos)
    }

})



// const brandIconColor = (lang: String) => {
//     if(lang === 'vue') {
//         return {
//             icon: 'fa-brands fa-vuejs',
//             color: 'green'
//         }
//     }
//     else if(lang === 'javascript') {
//         return {
//             icon: 'fa-brands fa-js',
//             color: 'orange'
//         }
//     }
//     else if(lang === 'bootstrap') {
//         return {
//             icon: 'fa-brands fa-bootstrap',
//             color: 'blue'
//         }
//     }
//     else if(lang === 'nodejs') {
//         return {
//             icon: 'fa-brands fa-node-js',
//             color: 'green'
//         }
//     }
//     else if(lang === 'react') {
//         return {
//             icon: 'fa-brands fa-react',
//             color: 'blue'
//         }
//     }
//     else if(lang === 'css') {
//         return {
//             icon: 'fa-brands fa-css3',
//             color: 'pink'
//         }
//     }
//     return {
//         icon: 'fa-brands fa-html5',
//         color: 'blue'
//     }
// }
</script> -->